<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>예약 날짜 선택</title>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h2>예약 날짜 선택</h2>

    <form name="reservation">
        <div id="datepicker"></div>

        <!-- Hidden input to store the selected date -->
        <input type="hidden" id="selectedDate" name="selectedDate">

        <div>
            <label for="reserverName">예약자 이름:</label>
            <input type="text" id="reserverName" name="reserverName">
        </div>

        <div id="reservationNotice" style="color:red;"></div>

        <button type="button" id="confirmBtn">예약 확정 및 CSV 다운로드</button>
    </form>
    <!-- ... -->

    <script>
        $(function() {
            $("#datepicker").datepicker({
                onSelect: function(dateText) {
                    var name = $("#reserverName").val();
                    if (name) {
                        $("#reservationNotice").text(name + "님, " + dateText + "에 예약확정 눌러야 예약이됩니다.");
                        $("#selectedDate").val(dateText);
                    } else {
                        $("#reserverName").focus();
                    }
                }
            });

            $("#confirmBtn").click(function() {
                var csvContent = '예약자 이름,예약 날짜\n'; // CSV header
                var name = $("#reserverName").val();
                var date = $("#selectedDate").val();
                csvContent += name + ',' + date;

                var blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                var link = document.createElement("a");
                var url = URL.createObjectURL(blob);
                link.setAttribute("href", url);
                link.setAttribute("download", "reservation.csv");
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });
        });
    </script>
</body>
</html>
